<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <input placeholder="Title" onchange="GetPostTitle(this)" />
    <br>
    <input placeholder="Description" onchange="GetPostDescription(this)" />
    <br>
    <button onclick="AddPostClick()">Add Post</button>
    <br>
    <br>
    <input placeholder="Post id" onchange="GetPostId(this)"/>
    <button onclick="RemovePostClick()">Remove Post</button>
    <br>
    <br>
    <input onchange="GetCommentContent(this)" placeholder="Comment content"/>
    <button onclick="AddCommentClick()">Add Comment</button>
    <script>

        function RandomNumberGenerator(min = 0, max = Number.MAX_SAFE_INTEGER) {
            return Math.round(Math.random() * (max - min)) + min;
        }
        let posts = [];

        let titleInput = "";
        let descriptionInput = "";
        let postIdInput = "";
        let commentContentInput = "";

        function GetPostTitle(element) {
            titleInput = element.value;
        }   
        function GetPostDescription(element) {
            descriptionInput = element.value;
        }
        function GetPostId(element){
            postIdInput = element.value;
        }
        function GetCommentContent(element){
            commentContentInput = element.value;
        }

        //------------------------------
        function AddCommentClick(){
            AddComment(postIdInput,commentContentInput);
        }

        function AddComment(postId,content){
           let post =  posts.find(function(sPost){
                return sPost.id == postId;
           })
           if(post == null){
                alert("Neynirsen a bala, Yoxdu bele element");
           }
           post.comment.push({
                id: GenerateId(),
                content: content
           });
        }
        function AddPostClick() {
            AddPost(titleInput, descriptionInput);
            console.log(posts);
        }

        function AddPost(title, description) {
            posts.push({
                id: GenerateId(),
                title: title,
                description: description,
                comment: []
            })
        }

        function RemovePostClick(){
            RemovePost(postIdInput);
        }
        function RemovePost(postId){
           posts = posts.filter(post => post.id == postId);
        }

        //--------------------------------------
        function GenerateId() {
            let id = RandomNumberGenerator();
            let isExsist = posts.some(function(post) {
                return post.id == id;
            })
            if (isExsist) {
                return GenerateId();
            }
            return id;
        }
    </script>
</body>

</html>